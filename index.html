<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <title>Mercado Limpio Global</title>
  <meta name="theme-color" content="#0f172a">
  <link rel="manifest" href="./manifest.json">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <style>
    /* RESET Y BASICS */
    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
    body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: #000; font-family: system-ui, -apple-system, sans-serif; }

    /* CONTENEDOR DE APPS (IFRAMES) */
    .app-container {
      position: absolute;
      top: 0; left: 0; width: 100%; height: 100%;
      border: none;
      opacity: 0;
      pointer-events: none; /* No clickeable cuando está oculta */
      transition: opacity 0.3s ease, transform 0.3s ease;
      transform: scale(0.98); /* Efecto zoom suave al entrar */
      background: #0f172a; /* Fondo de carga */
    }

    /* ESTADO ACTIVO DE LA APP */
    .app-container.active {
      opacity: 1;
      pointer-events: auto;
      transform: scale(1);
      z-index: 10;
    }

    /* BARRA DE NAVEGACIÓN (DOCK FLOTANTE) */
    .dock-wrapper {
      position: fixed;
      bottom: 20px; 
      left: 0; right: 0;
      display: flex;
      justify-content: center;
      z-index: 1000;
      padding-bottom: env(safe-area-inset-bottom, 0px);
      pointer-events: none; /* Dejar pasar clicks en los costados */
    }

    .dock {
      pointer-events: auto;
      background: rgba(15, 23, 42, 0.85);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 24px;
      padding: 6px;
      display: flex;
      gap: 8px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.5);
    }

    /* BOTONES */
    .dock-btn {
      border: none;
      background: transparent;
      color: #94a3b8; /* Gris inactivo */
      padding: 10px 20px;
      border-radius: 18px;
      font-size: 13px;
      font-weight: 700;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); /* Efecto rebote */
      min-width: 110px;
      justify-content: center;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .dock-btn i { font-size: 16px; transition: transform 0.3s; }

    /* ESTADO ACTIVO BOTÓN 1 (CLIENTES) */
    .dock-btn.active-clientes {
      background: #3b82f6; /* Azul */
      color: white;
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
      transform: translateY(-2px);
    }

    /* ESTADO ACTIVO BOTÓN 2 (PEDIDOS) */
    .dock-btn.active-pedidos {
      background: #06b6d4; /* Cyan/Verde */
      color: white;
      box-shadow: 0 4px 12px rgba(6, 182, 212, 0.4);
      transform: translateY(-2px);
    }
    
    .dock-btn:active { transform: scale(0.95); }

    /* TEXTO DINÁMICO */
    .btn-label { display: block; }
    
    /* PWA INSTALL PROMPT (Opcional) */
    #install-btn { display:none; position:fixed; top:10px; right:10px; z-index:2000; background:white; color:black; padding:5px 10px; border-radius:8px; font-weight:bold; font-size:11px; }
  </style>
</head>
<body>

  <iframe 
    id="frame-clientes" 
    class="app-container active" 
    src="https://pablosantamaria26.github.io/app-vendedores/"
    allow="geolocation; microphone; camera; fullscreen">
  </iframe>

  <iframe 
    id="frame-pedidos" 
    class="app-container" 
    src="https://pablosantamaria26.github.io/App-Pedidos-ML/index.html" 
    allow="geolocation; microphone; camera; fullscreen">
  </iframe>

  <div class="dock-wrapper">
    <div class="dock">
      
      <button id="btn-clientes" class="dock-btn active-clientes" onclick="switchApp('clientes')">
        <i class="fas fa-users"></i>
        <span class="btn-label">CLIENTES</span>
      </button>

      <button id="btn-pedidos" class="dock-btn" onclick="switchApp('pedidos')">
        <i class="fas fa-box-open"></i>
        <span class="btn-label">LOGÍSTICA</span>
      </button>

    </div>
  </div>

  <script>
    // Configuración
    const frames = {
      clientes: document.getElementById('frame-clientes'),
      pedidos: document.getElementById('frame-pedidos')
    };
    const btns = {
      clientes: document.getElementById('btn-clientes'),
      pedidos: document.getElementById('btn-pedidos')
    };

    // Función de cambio de pestaña
    function switchApp(target) {
      // 1. Manejo de IFrames (Visibilidad)
      // Usamos clases para animaciones CSS en lugar de display:none para no recargar la app
      Object.keys(frames).forEach(key => {
        if (key === target) {
          frames[key].classList.add('active');
        } else {
          frames[key].classList.remove('active');
        }
      });

      // 2. Manejo de Botones (Estilos y Nombres)
      // Reseteamos
      btns.clientes.className = 'dock-btn';
      btns.pedidos.className = 'dock-btn';

      // Activamos el target
      if (target === 'clientes') {
        btns.clientes.classList.add('active-clientes');
        btns.clientes.querySelector('.btn-label').textContent = 'CLIENTES';
        btns.pedidos.querySelector('.btn-label').textContent = 'LOGÍSTICA'; // Nombre pasivo
      } else {
        btns.pedidos.classList.add('active-pedidos');
        btns.pedidos.querySelector('.btn-label').textContent = 'PEDIDOS'; // Nombre activo
        btns.clientes.querySelector('.btn-label').textContent = 'VENTAS'; // Nombre pasivo
      }

      // Haptic feedback (vibración suave en Android)
      if (navigator.vibrate) navigator.vibrate(10);
    }

    // Service Worker Wrapper (Opcional, para cachear este contenedor)
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('./sw-container.js').catch(() => {});
    }
  </script>
</body>
</html>
